/*! For license information please see backend.0311cfbc.js.LICENSE.txt */
(()=>{"use strict";function e(){var n,r,o="function"==typeof Symbol?Symbol:{},c=o.iterator||"@@iterator",i=o.toStringTag||"@@toStringTag";function u(e,o,c,i){var u=o&&o.prototype instanceof s?o:s,l=Object.create(u.prototype);return t(l,"_invoke",function(e,t,o){var c,i,u,s=0,l=o||[],d=!1,f={p:0,n:0,v:n,a:p,f:p.bind(n,4),d:function(e,t){return c=e,i=0,u=n,f.n=t,a}};function p(e,t){for(i=e,u=t,r=0;!d&&s&&!o&&r<l.length;r++){var o,c=l[r],p=f.p,y=c[2];e>3?(o=y===t)&&(u=c[(i=c[4])?5:(i=3,3)],c[4]=c[5]=n):c[0]<=p&&((o=e<2&&p<c[1])?(i=0,f.v=t,f.n=c[1]):p<y&&(o=e<3||c[0]>t||t>y)&&(c[4]=e,c[5]=t,f.n=y,i=0))}if(o||e>1)return a;throw d=!0,t}return function(o,l,y){if(s>1)throw TypeError("Generator is already running");for(d&&1===l&&p(l,y),i=l,u=y;(r=i<2?n:u)||!d;){c||(i?i<3?(i>1&&(f.n=-1),p(i,u)):f.n=u:f.v=u);try{if(s=2,c){if(i||(o="next"),r=c[o]){if(!(r=r.call(c,u)))throw TypeError("iterator result is not an object");if(!r.done)return r;u=r.value,i<2&&(i=0)}else 1===i&&(r=c.return)&&r.call(c),i<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),i=1);c=n}else if((r=(d=f.n<0)?u:e.call(t,f))!==a)break}catch(e){c=n,i=1,u=e}finally{s=1}}return{value:r,done:d}}}(e,c,i),!0),l}var a={};function s(){}function l(){}function d(){}r=Object.getPrototypeOf;var f=[][c]?r(r([][c]())):(t(r={},c,function(){return this}),r),p=d.prototype=s.prototype=Object.create(f);function y(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,t(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return l.prototype=d,t(p,"constructor",d),t(d,"constructor",l),l.displayName="GeneratorFunction",t(d,i,"GeneratorFunction"),t(p),t(p,i,"Generator"),t(p,c,function(){return this}),t(p,"toString",function(){return"[object Generator]"}),(e=function(){return{w:u,m:y}})()}function t(e,n,r,o){var c=Object.defineProperty;try{c({},"",{})}catch(e){c=0}t=function(e,n,r,o){function i(n,r){t(e,n,function(e){return this._invoke(n,r,e)})}n?c?c(e,n,{value:r,enumerable:!o,configurable:!o,writable:!o}):e[n]=r:(i("next",0),i("throw",1),i("return",2))},t(e,n,r,o)}function n(e,t,n,r,o,c,i){try{var u=e[c](i),a=u.value}catch(e){return void n(e)}u.done?t(a):Promise.resolve(a).then(r,o)}function r(e){return function(){var t=this,r=arguments;return new Promise(function(o,c){var i=e.apply(t,r);function u(e){n(i,o,c,u,a,"next",e)}function a(e){n(i,o,c,u,a,"throw",e)}u(void 0)})}}document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".loki-prompt-button button").forEach(function(e){e.addEventListener("click",function(){fetch(e.dataset.prefix+"/_loki/prompt/"+e.dataset.id+"/"+e.dataset.field+"/"+e.dataset.objectId).then(function(e){return e.json()}).then(function(t){if(t.result){var n=e.closest(".widget").querySelector("input[id]"),r=e.closest(".widget").querySelector("textarea[id]"),o=e.closest(".widget").querySelector("select[id]");if(n)n.value=t.result;else if(r)r.innerText=t.result,tinymce&&tinymce.get(r.id)&&tinymce.get(r.id).setContent(t.result);else if(o){o.querySelectorAll("option[selected]").forEach(function(e){e.selected=!1});var c=o.querySelector('option[value="'+t.result+'"]');if(c&&(c.selected=!0),o.classList.contains("tl_chosen")){o.dispatchEvent(new Event("input",{bubbles:!0}));var i=o.parentElement.querySelector(".chzn-container");i&&(i.remove(),new Chosen(o))}}}})})})}),document.addEventListener("DOMContentLoaded",r(e().m(function t(){var n,r,o,c,i,u,a,s,l,d,f;return e().w(function(e){for(;;)switch(e.n){case 0:if(!document.querySelector(".prompts.progress")){e.n=5;break}n=JSON.parse(window.loki_fields),r=parseInt(document.querySelector(".error-count").innerText),o=document.querySelector(".error-messages"),c=document.querySelector(".errors"),i=parseInt(document.querySelector(".completed").innerText),u=0;case 1:if(!(u<n.length)){e.n=5;break}return a=n[u],e.n=2,fetch("/contao/_loki/execute/"+a.field+"/"+a.fieldName+"/"+a.id);case 2:return s=e.v,e.n=3,s.json();case 3:(l=e.v).error&&(c.classList.remove("invisible"),r+=1,document.querySelector(".error-count").innerText=r,(d=document.createElement("p")).innerText=l.error,d.classList.add("error-message"),o.append(d)),i+=1,document.querySelector(".completed").innerText=i,i===n.length&&((f=document.querySelector(".status.pending")).classList.remove("pending"),f.classList.add("complete"));case 4:u++,e.n=1;break;case 5:return e.a(2)}},t)})))})();